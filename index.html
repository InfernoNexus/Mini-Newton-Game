<!DOCTYPE html>
<html>
<head><meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Newton & Gravity</title>
  <style>
    body {
      margin: 0;
      text-align: center;
      font-family: Arial;
      background: linear-gradient(#9fdcff, #eef9ff);
    
    }

    canvas {
      display: block;
      margin: auto;
      background: #87ceeb;
      border: 4px solid #000;
      border-radius:32px;
    }

    button {
      margin: auto;
      padding: 10px 28px;
      font-size: 50px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      background: #ff3333;
      color: black;

/* Arrow buttons row */
#controls {
  display: flex;
  justify-content: center;
  gap: 25px;
  width: 100%;
}

/* Restart button smaller than arrows */
.restart-btn {
  font-size: 20px;
  padding: 10px 20px;
  background: #ff3333;
  color: white;
}

/* ---------- PHONE OPTIMIZATION ---------- */
@media (max-width: 600px) {
  canvas {
    width: 95%;
    height: auto;
  }

  #controls button {
    font-size: 38px;
    padding: 14px 22px;
  }

  .restart-btn {
    font-size: 18px;
    padding: 10px 18px;
  }
}

    }
    #controls {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-top: 15px;
}

  </style>
 

</head>
<body>

<h2>üçé Newton & Gravity üçé</h2>

<canvas id="game" width="520" height="620"></canvas>
<div id="mobile-ui">
  <div id="controls">
    <button id="leftBtn">‚¨ÖÔ∏è</button>
    <button id="rightBtn">‚û°Ô∏è</button>
  </div>

  <button class="restart-btn" onclick="restartGame()">Restart Game</button>
</div>

<!-- Background Music -->
<audio id="bgm" loop>
  <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_0f7c38a88e.mp3?filename=peaceful-garden-12257.mp3">
</audio>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const music = document.getElementById("bgm");

let newtonX = 215;
let appleX = Math.random() * 480;
let appleY = 0;

let score = 0;
let speed = 5;
let lives = 1;
let gameOver = false;
let isGolden = false; // tells if current apple is golden

/* ---------- CLOUDS ---------- */
let clouds = [
  { x: 50, y: 80, speed: 0.3 },
  { x: 250, y: 120, speed: 0.2 },
  { x: 400, y: 60, speed: 0.25 }
];

document.addEventListener("keydown", moveNewton);
  /* Phone Touch Support */
document.getElementById("leftBtn").ontouchstart = function(){
  if (newtonX > 20) newtonX -= 30;
};

document.getElementById("rightBtn").ontouchstart = function(){
  if (newtonX < 410) newtonX += 30;
};


function moveNewton(e) {
  if (e.key === "ArrowLeft" && newtonX > 20) newtonX -= 25;
  if (e.key === "ArrowRight" && newtonX < 410) newtonX += 25;
}

/* ---------- BACKGROUND ---------- */
function drawGrass() {
  // Base gradient (depth)
  const grad = ctx.createLinearGradient(0, 440, 0, canvas.height);
  grad.addColorStop(0, "#4caf50");
  grad.addColorStop(1, "#2e7d32");

  ctx.fillStyle = grad;
  ctx.fillRect(0, 440, canvas.width, canvas.height);

  // Grass blades texture
  for (let i = 0; i < 220; i++) {
    const x = Math.random() * canvas.width;
    const y = 440 + Math.random() * 180;

    ctx.strokeStyle = "rgba(0,80,0,0.25)";
    ctx.beginPath();
    ctx.moveTo(x, y);
    ctx.lineTo(x + Math.random() * 4 - 2, y - 10);
    ctx.stroke();
  }

  // Light highlights
  for (let i = 0; i < 120; i++) {
    const x = Math.random() * canvas.width;
    const y = 440 + Math.random() * 180;

    ctx.fillStyle = "rgba(255,255,255,0.08)";
    ctx.fillRect(x, y, 2, 2);
  }

  function drawBackground() {

  /* ----- TREE TRUNK WITH BARK TEXTURE ----- */
  const trunkGrad = ctx.createLinearGradient(90, 260, 135, 260);
  trunkGrad.addColorStop(0, "#4e342e");
  trunkGrad.addColorStop(1, "#6d4c41");

  ctx.fillStyle = trunkGrad;
  ctx.fillRect(90, 260, 45, 220);

  // Bark lines
  for (let i = 0; i < 25; i++) {
    ctx.strokeStyle = "rgba(0,0,0,0.25)";
    const y = 260 + Math.random() * 220;
    ctx.beginPath();
    ctx.moveTo(90, y);
    ctx.lineTo(135, y + Math.random() * 6 - 3);
    ctx.stroke();
  }

  /* ----- TREE LEAVES WITH SHADING ----- */
  const leafGrad = ctx.createRadialGradient(112, 220, 20, 112, 240, 95);
  leafGrad.addColorStop(0, "#66bb6a");
  leafGrad.addColorStop(1, "#1b5e20");

  ctx.beginPath();
  ctx.arc(112, 240, 95, 0, Math.PI * 2);
  ctx.fillStyle = leafGrad;
  ctx.fill();

  // Leaf texture dots
  for (let i = 0; i < 160; i++) {
    const angle = Math.random() * Math.PI * 2;
    const radius = Math.random() * 85;

    const x = 112 + Math.cos(angle) * radius;
    const y = 240 + Math.sin(angle) * radius;

    ctx.fillStyle = "rgba(255,255,255,0.06)";
    ctx.fillRect(x, y, 3, 3);
  }


/* ---------- CLOUDS ---------- */
function drawClouds() {
  ctx.fillStyle = "rgba(255,255,255,0.9)";
  clouds.forEach(c => {
    ctx.beginPath();
    ctx.arc(c.x, c.y, 20, 0, Math.PI * 2);
    ctx.arc(c.x + 25, c.y + 5, 25, 0, Math.PI * 2);
    ctx.arc(c.x + 55, c.y, 20, 0, Math.PI * 2);
    ctx.fill();

    c.x += c.speed;
    if (c.x > canvas.width + 60) c.x = -60;
  });
}

/* ---------- NEWTON ---------- */
function drawNewton() {
  ctx.fillStyle = "rgba(0,0,0,0.25)";
  ctx.beginPath();
  ctx.ellipse(newtonX + 50, 565, 42, 10, 0, 0, Math.PI * 2);
  ctx.fill();

  ctx.fillStyle = "#6b3f2a";
  ctx.fillRect(newtonX, 455, 100, 95);

  ctx.fillStyle = "#ffffff";
  ctx.fillRect(newtonX + 40, 455, 20, 70);

  ctx.beginPath();
  ctx.arc(newtonX + 50, 420, 26, 0, Math.PI * 2);
  ctx.fillStyle = "#f1c27d";
  ctx.fill();

  ctx.fillStyle = "#f0f0f0";
  ctx.beginPath();
  ctx.arc(newtonX + 50, 410, 32, Math.PI, 0);
  ctx.fill();

  ctx.beginPath();
  ctx.arc(newtonX + 18, 425, 14, 0, Math.PI * 2);
  ctx.arc(newtonX + 82, 425, 14, 0, Math.PI * 2);
  ctx.fill();

  ctx.fillStyle = "black";
  ctx.beginPath();
  ctx.arc(newtonX + 42, 420, 2.5, 0, Math.PI * 2);
  ctx.arc(newtonX + 58, 420, 2.5, 0, Math.PI * 2);
  ctx.fill();

  ctx.fillStyle = "#000";
  ctx.fillRect(newtonX + 28, 550, 16, 45);
  ctx.fillRect(newtonX + 56, 550, 16, 45);
}

/* ---------- APPLE ---------- */
function drawApple() {
  ctx.beginPath();
  ctx.arc(appleX, appleY, 15, 0, Math.PI * 2);

  // If golden, draw gold color
  ctx.fillStyle = isGolden ? "gold" : "red";
  ctx.fill();

  // Shine effect
  ctx.beginPath();
  ctx.arc(appleX - 5, appleY - 6, 4, 0, Math.PI * 2);
  ctx.fillStyle = isGolden ? "#fff4a3" : "#ffaaaa";
  ctx.fill();

  ctx.fillStyle = "brown";
  ctx.fillRect(appleX - 1, appleY - 22, 2, 10);
}


function resetApple() {
  appleY = 0;

  const margin = 30;
  appleX = margin + Math.random() * (canvas.width - margin * 2);

  // 20% chance to spawn golden apple
  isGolden = Math.random() < 0.2;
}

/* ---------- RESTART ---------- */
function restartGame() {
  score = 0;
  speed = 5;
  lives = 1;
  gameOver =false;
  resetApple();

  music.volume = 0.5;
  music.play();

  gameLoop();
}

/* ---------- GAME LOOP ---------- */
function gameLoop() {
  if (gameOver) {
    ctx.fillStyle = "rgba(0,0,0,0.65)";
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    ctx.fillStyle = "red";
    ctx.font = "38px Arial";
    ctx.fillText("GAME OVER", 150, 300);

    ctx.fillStyle = "white";
    ctx.font = "20px Arial";
    ctx.fillText("Score: " + score, 215, 340);
    return;
  }

  ctx.clearRect(0, 0, canvas.width, canvas.height);

  drawClouds();
  drawBackground();
  drawgrass();
  drawNewton();
  drawApple();

  ctx.fillStyle = "black";
  ctx.font = "18px Arial";
  ctx.fillText("Score: " + score, 20, 30);
  ctx.fillText("Life: " + lives, 440, 30);

  appleY += speed;

  if (appleY > 440 && appleX > newtonX && appleX < newtonX + 100) {
    if (isGolden) {
  score += 5;   // golden apple bonus
} else {
  score += 1;   // normal apple
}
    if (score % 4 === 0) speed += 1;
    if ( score  %  6===0) speed+=2;

    resetApple();
  }

  if (appleY > canvas.height) {
    gameOver = true;
    music.pause();
  }

  requestAnimationFrame(gameLoop);
}

resetApple();
gameLoop();

</script>

</body>
</html>

